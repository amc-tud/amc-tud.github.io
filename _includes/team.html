<!-- Team Section -->
<section id="team" class="bg-light-gray">
  <div class="container">
    
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading">Our Amazing Team</h2>
        <h3 class="section-subheading text-muted">All dorks but good people</h3>
      </div>
    </div>
    
    <!-- PI Section -->
    <div class="row" style="margin-bottom: 40px;">
      {% assign pi = site.people | where: "role", "PI" | first %}
      {% if pi %}
      <div class="col-sm-12 text-center">
        <div class="team-member" style="max-width:340px;margin:0 auto;">
          <img src="img/team/{{ pi.pic }}.jpg" class="img-oval" alt="">
          <h4>{{ pi.name }}</h4>
          <p class="text-muted">{{ pi.position }}</p>
          <ul class="list-inline social-buttons">
            {% for network in pi.social %}
            <li>
              <a href="{{ network.url }}" target="_blank" rel="noopener" aria-label="{{ network.title }}">
                <i class="fa fa-{{ network.title | downcase }}"></i>
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}
    </div>
    
    <!-- Combined non-PI members (randomized client-side) -->
    <div id="team-grid" class="row text-center">
      {% assign non_pi = site.team | where_exp: "item", "item.role != 'PI'" %}
      {% for member in non_pi %}
      <div class="col-sm-5ths team-card" data-name="{{ member.title }}">
        <div class="team-member">
          <img src="img/team/{{ member.pic }}.jpg" class="img-oval" alt="{{ member.title }}">
          <h4>
            <a href="{{ member.url }}">{{ member.title }}</a>
          </h4>
          <p class="text-muted">{{ member.position }}</p>
          <ul class="list-inline social-buttons">
            {% for network in member.social %}
            <li>
              <a href="{{ network.url }}" target="_blank" rel="noopener" aria-label="{{ network.title }}">
                {% case network.title %}
                {% when 'twitter' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M24 4.557a9.93 9.93 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724c-.951.564-2.005.974-3.127 1.195a4.92 4.92 0 0 0-8.39 4.482C7.691 8.095 4.066 6.13 1.64 3.161c-.542.929-.856 2.01-.857 3.17 0 2.188 1.115 4.117 2.823 5.254a4.904 4.904 0 0 1-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.936 4.936 0 0 1-2.224.084c.627 1.956 2.444 3.377 4.6 3.417A9.867 9.867 0 0 1 0 21.543a13.94 13.94 0 0 0 7.548 2.209c9.058 0 14.009-7.496 14.009-13.986 0-.21-.005-.423-.015-.634A9.936 9.936 0 0 0 24 4.557z"/></svg>
                {% when 'facebook' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.326 24H12.82v-9.294H9.692V11.01h3.127V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.696h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"/></svg>
                {% when 'stack-overflow' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M17.473 21.249v-5.249h2.25v7.5h-17.25v-7.5h2.25v5.249h12.75zm-10.5-2.25h8.25v-1.5h-8.25v1.5zm10.5-3.75l-8.25-1.5.375-1.485 8.25 1.5-.375 1.485zm1.5-3.75l-6.75-4.5.75-1.299 6.75 4.5-.75 1.299zm-2.25-4.5l-4.5-6.75 1.299-.75 4.5 6.75-1.299.75z"/></svg>
                {% when 'github' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.084-.729.084-.729 1.205.084 1.84 1.236 1.84 1.236 1.07 1.834 2.809 1.304 3.495.997.108-.775.418-1.305.762-1.605-2.665-.305-5.466-1.334-5.466-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.553 3.297-1.23 3.297-1.23.653 1.653.242 2.873.119 3.176.77.84 1.235 1.91 1.235 3.221 0 4.609-2.803 5.624-5.475 5.921.43.371.823 1.102.823 2.222v3.293c0 .322.218.694.825.576C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                {% when 'bitbucket' %}
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22.548 2.705c-.153-.186-.377-.293-.615-.293H2.067c-.238 0-.462.107-.615.293-.153.186-.21.429-.153.661l3.43 15.021c.077.338.377.573.726.573h12.964c.349 0 .649-.235.726-.573l3.43-15.021c.057-.232 0-.475-.153-.661zm-10.548 13.295c-1.104 0-2-.896-2-2s.896-2 2-2 2 .896 2 2-.896 2-2 2zm0-7c-2.757 0-5 2.243-5 5 0 2.757 2.243 5 5 5s5-2.243 5-5c0-2.757-2.243-5-5-5z"/></svg>
                {% else %}
                  {{ network.title }}
                {% endcase %}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endfor %}
    </div>

    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 text-center">
        <p class="large text-muted"></p>
      </div>
    </div>
    
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var grid = document.getElementById('team-grid');
  if (!grid) return;
  var nodes = Array.from(grid.querySelectorAll('.team-card'));
  // Fisher-Yates shuffle
  for (var i = nodes.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = nodes[i];
    nodes[i] = nodes[j];
    nodes[j] = tmp;
  }
  nodes.forEach(function(n) { grid.appendChild(n); });
});
</script>
